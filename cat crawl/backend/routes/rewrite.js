import express from 'express'; import fetchOriginalText from '../services/fetchOriginalText.js'; import rewriteText from '../services/rewriteText.js'; const router = express.Router(); router.post('/', async (req, res) => { const { url, style = '口语化', model = 'qwen' } = req.body; try { const original = await fetchOriginalText(url); const rewrite = await rewriteText({ text: original, style, model }); res.json({ original, rewrite, style, model }); } catch (e) { console.error('[rewrite error]', e); res.status(500).json({ error: '处理失败，请稍后重试' }); } }); export default router;